<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TKA Matematika SMP - Tryout</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .progress-bar {
            background: #f0f0f0;
            height: 8px;
            border-radius: 4px;
            margin: 20px 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            padding: 20px 30px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .content {
            padding: 30px;
        }

        .welcome-screen, .name-screen {
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-screen h2, .name-screen h2 {
            font-size: 28px;
            color: #333;
            margin-bottom: 20px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
            text-align: left;
        }

        .info-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .info-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .info-card p {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
        }

        .name-input-group {
            max-width: 400px;
            margin: 30px auto;
        }

        .name-input-group label {
            display: block;
            text-align: left;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .name-input-group input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: border-color 0.3s;
        }

        .name-input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 16px;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .question-section {
            display: none;
        }

        .question-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 8px;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .question-number {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .topic-badge {
            background: #e9ecef;
            color: #495057;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
        }

        .question-text {
            font-size: 16px;
            color: #333;
            margin: 15px 0;
            line-height: 1.8;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option.selected {
            border-color: #667eea;
            background: #e8edff;
        }

        .option input {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .category-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .category-table th, .category-table td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }

        .category-table th {
            background: #f8f9fa;
            font-weight: bold;
        }

        .category-option {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .category-option label {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e9ecef;
        }

        .result-screen {
            display: none;
            padding: 40px 20px;
        }

        .student-name-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            display: inline-block;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 30px auto;
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .score-number {
            font-size: 48px;
            font-weight: bold;
        }

        .score-label {
            font-size: 16px;
            opacity: 0.9;
        }

        .result-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .review-section {
            margin-top: 30px;
        }

        .review-question {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .review-question.correct {
            border-left: 4px solid #28a745;
        }

        .review-question.wrong {
            border-left: 4px solid #dc3545;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .review-status {
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 14px;
            font-weight: bold;
        }

        .review-status.correct {
            background: #d4edda;
            color: #155724;
        }

        .review-status.wrong {
            background: #f8d7da;
            color: #721c24;
        }

        .explanation {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
        }

        .explanation-title {
            font-weight: bold;
            color: #2196F3;
            margin-bottom: 10px;
        }

        .answer-comparison {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .answer-line {
            margin: 5px 0;
            padding: 5px;
        }

        .answer-line.your-answer {
            color: #dc3545;
        }

        .answer-line.correct-answer {
            color: #28a745;
            font-weight: bold;
        }

        .instruction-text {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 5px;
            font-weight: 500;
            color: #856404;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .navigation {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
            }

            .question-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî¢ TKA Matematika SMP</h1>
            <p>Tes Kemampuan Akademik - Tryout</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">Soal Dijawab</div>
                <div class="stat-value" id="answered">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Total Soal</div>
                <div class="stat-value">30</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Progress</div>
                <div class="stat-value" id="percentage">0%</div>
            </div>
        </div>

        <div class="content">
            <div class="welcome-screen" id="welcomeScreen">
                <h2>Selamat Datang di Tryout Matematika! üìê</h2>
                <p>Ujilah kemampuan matematika Anda dengan 30 soal yang mencakup semua materi SMP</p>
                
                <div class="info-grid">
                    <div class="info-card">
                        <h3>üìä Jumlah Soal</h3>
                        <p>30 soal mencakup Bilangan, Aljabar, Geometri, dan Data & Peluang</p>
                    </div>
                    <div class="info-card">
                        <h3>üìù Jenis Soal</h3>
                        <p>Pilihan Ganda, PG Kompleks (MCMA), dan Benar/Salah</p>
                    </div>
                    <div class="info-card">
                        <h3>‚úÖ Wajib Diisi</h3>
                        <p>Semua soal harus dijawab sebelum melihat hasil</p>
                    </div>
                    <div class="info-card">
                        <h3>üí° Pembahasan Lengkap</h3>
                        <p>Setiap soal dilengkapi dengan pembahasan detail</p>
                    </div>
                </div>

                <button class="btn" onclick="showNameInput()">Mulai Tryout</button>
            </div>

            <div class="name-screen" id="nameScreen" style="display: none;">
                <h2>‚úèÔ∏è Identitas Peserta</h2>
                <p>Silakan masukkan nama Anda sebelum memulai tryout</p>
                <div class="name-input-group">
                    <label for="studentName">Nama Lengkap:</label>
                    <input type="text" id="studentName" placeholder="Masukkan nama Anda..." autofocus>
                </div>
                <button class="btn" onclick="startTest()">Mulai Mengerjakan</button>
                <button class="btn btn-secondary" onclick="backToWelcome()">Kembali</button>
            </div>

            <div class="question-section" id="questionSection"></div>

            <div class="result-screen" id="resultScreen">
                <div style="text-align: center;">
                    <div class="student-name-display" id="studentNameDisplay"></div>
                    <h2>üéâ Tryout Selesai!</h2>
                    <div class="score-circle">
                        <div class="score-number" id="finalScore">0</div>
                        <div class="score-label">dari 30</div>
                    </div>
                    <div class="result-details">
                        <div class="result-item">
                            <span>Nilai:</span>
                            <strong id="scorePercentage">0%</strong>
                        </div>
                        <div class="result-item">
                            <span>Jawaban Benar:</span>
                            <strong id="correctAnswers">0</strong>
                        </div>
                        <div class="result-item">
                            <span>Jawaban Salah:</span>
                            <strong id="wrongAnswers">0</strong>
                        </div>
                    </div>
                </div>

                <h3 style="margin: 30px 0 15px 0; color: #333; text-align: center;">üìö Pembahasan Soal</h3>
                <div id="reviewSection" class="review-section"></div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="resetTest()">Ulangi Tryout</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            // BAGIAN I: PILIHAN GANDA (Soal 1-12)
            {
                question: "Dalam sebuah kompetisi matematika, setiap jawaban benar diberi skor 4, salah -2, dan tidak dijawab -1. Dari 40 soal, Budi menjawab benar 28 soal dan salah 5 soal. Skor total yang diperoleh Budi adalah ....",
                type: "pg",
                options: ["102", "96", "95", "88"],
                correct: 2,
                topic: "Bilangan (L2)",
                explanation: "Benar: 28√ó4=112<br>Salah: 5√ó(‚àí2)=‚àí10<br>Tidak dijawab: (40‚àí28‚àí5)=7√ó(‚àí1)=‚àí7<br>Total: 112‚àí10‚àí7=95"
            },
            {
                question: "Bentuk sederhana dari 2‚àö48 + ‚àö75 - 3‚àö12 adalah ....",
                type: "pg",
                options: ["5‚àö3", "6‚àö3", "7‚àö3", "9‚àö3"],
                correct: 2,
                topic: "Bilangan (L2)",
                explanation: "2‚àö(16√ó3) + ‚àö(25√ó3) - 3‚àö(4√ó3)<br>= 2(4)‚àö3 + 5‚àö3 - 3(2)‚àö3<br>= 8‚àö3 + 5‚àö3 - 6‚àö3<br>= 7‚àö3"
            },
            {
                question: "Amuba membelah diri menjadi dua setiap 15 menit. Jika mula-mula ada 20 amuba, banyak amuba setelah 1,5 jam adalah ....",
                type: "pg",
                options: ["320", "640", "1.280", "2.560"],
                correct: 2,
                topic: "Bilangan (L3)",
                explanation: "Durasi: 1,5 jam = 90 menit<br>Banyak pembelahan (n): 90/15 = 6 kali<br>Rumus: Un = a √ó r^n ‚Üí 20 √ó 2^6 = 20 √ó 64 = 1.280"
            },
            {
                question: "Himpunan penyelesaian dari pertidaksamaan 3(x‚àí2) ‚â§ x+8 untuk x bilangan bulat adalah ....",
                type: "pg",
                options: ["{...,4,5,6}", "{...,5,6,7}", "{7,8,9,...}", "{...,6,7,8}"],
                correct: 1,
                topic: "Aljabar (L2)",
                explanation: "3x‚àí6 ‚â§ x+8<br>3x‚àíx ‚â§ 8+6<br>2x ‚â§ 14 ‚Üí x ‚â§ 7<br>Himpunan bilangan bulat ‚â§7 adalah {...,5,6,7}"
            },
            {
                question: "Harga 2 baju dan 1 celana adalah Rp140.000,00. Harga 3 baju dan 2 celana adalah Rp235.000,00. Harga 1 baju dan 1 celana adalah ....",
                type: "pg",
                options: ["Rp85.000,00", "Rp90.000,00", "Rp95.000,00", "Rp105.000,00"],
                correct: 2,
                topic: "Aljabar (L2)",
                explanation: "Misal Baju=x, Celana=y<br>1) 2x+y=140.000<br>2) 3x+2y=235.000<br>Dari (1) y=140.000‚àí2x, subst ke (2)<br>Didapat x=45.000, y=50.000<br>x+y=95.000"
            },
            {
                question: "Diketahui fungsi f(x)=ax+b. Jika f(2)=5 dan f(‚àí1)=‚àí4, nilai dari f(3) adalah ....",
                type: "pg",
                options: ["8", "9", "10", "11"],
                correct: 0,
                topic: "Aljabar (L1)",
                explanation: "2a+b=5<br>‚àía+b=‚àí4 (kurangkan)<br>3a=9 ‚Üí a=3<br>3(2)+b=5 ‚Üí b=‚àí1<br>f(3)=3(3)‚àí1=8"
            },
            {
                question: "Sebuah tangga sepanjang 10 meter disandarkan pada tembok. Jika jarak kaki tangga ke tembok adalah 6 meter, tinggi tembok yang dicapai tangga adalah ....",
                type: "pg",
                options: ["6 m", "7 m", "8 m", "9 m"],
                correct: 2,
                topic: "Geometri (L2)",
                explanation: "Menggunakan Pythagoras:<br>t = ‚àö(10¬≤ ‚àí 6¬≤)<br>= ‚àö(100 ‚àí 36)<br>= ‚àö64 = 8 m"
            },
            {
                question: "Luas permukaan kubus yang memiliki panjang rusuk 9 cm adalah ....",
                type: "pg",
                options: ["243 cm¬≤", "486 cm¬≤", "729 cm¬≤", "864 cm¬≤"],
                correct: 1,
                topic: "Geometri (L2)",
                explanation: "Rumus LP Kubus: 6 √ó s¬≤<br>= 6 √ó 9¬≤<br>= 6 √ó 81<br>= 486 cm¬≤"
            },
            {
                question: "Sebuah taman berbentuk lingkaran dengan diameter 28 m. Di tengah taman akan dibuat kolam air mancur berbentuk lingkaran berdiameter 14 m. Sisa lahan akan ditanami rumput. Luas lahan yang ditanami rumput adalah ....",
                type: "pg",
                options: ["154 m¬≤", "308 m¬≤", "462 m¬≤", "616 m¬≤"],
                correct: 2,
                topic: "Geometri (L3)",
                explanation: "L_besar = œÄ √ó 14 √ó 14 = 616 m¬≤<br>L_kecil = œÄ √ó 7 √ó 7 = 154 m¬≤<br>Sisa = 616 ‚àí 154 = 462 m¬≤"
            },
            {
                question: "Rata-rata nilai ulangan matematika dari 10 siswa adalah 75. Jika nilai Andi dimasukkan, rata-ratanya menjadi 76. Nilai Andi adalah ....",
                type: "pg",
                options: ["76", "80", "85", "86"],
                correct: 3,
                topic: "Data (L2)",
                explanation: "Total awal = 10 √ó 75 = 750<br>Total baru = 11 √ó 76 = 836<br>Nilai Andi = 836 ‚àí 750 = 86"
            },
            {
                question: "Median dari data: 7, 6, 8, 9, 6, 7, 5, 8, 8, 7 adalah ....",
                type: "pg",
                options: ["6", "6,5", "7", "7,5"],
                correct: 2,
                topic: "Data (L1)",
                explanation: "Urutkan: 5, 6, 6, 7, 7, 7, 8, 8, 8, 9<br>Data ke-10 (genap). Median = (data ke-5 + data ke-6) / 2<br>= (7+7)/2 = 7"
            },
            {
                question: "Dua buah dadu dilambungkan bersamaan. Peluang muncul mata dadu berjumlah 9 adalah ....",
                type: "pg",
                options: ["1/9", "1/6", "4/36", "5/36"],
                correct: 0,
                topic: "Data (L2)",
                explanation: "Kejadian jumlah 9: (3,6), (4,5), (5,4), (6,3) ‚Üí ada 4<br>Ruang sampel: 36<br>Peluang: 4/36 = 1/9"
            },

            // BAGIAN II: PG KOMPLEKS - MCMA (Soal 13-21)
            {
                question: "Diketahui himpunan S={1,2,3,...,10}. Dari himpunan tersebut dipilih dua bilangan secara acak. Manakah pernyataan yang benar mengenai sifat bilangan yang mungkin terpilih?<br><br><em>Pilihlah jawaban yang benar! Jawaban benar lebih dari satu.</em>",
                type: "multiple",
                options: [
                    "Pasangan (2, 3) adalah pasangan bilangan prima",
                    "Pasangan (4, 9) adalah pasangan bilangan kuadrat",
                    "FPB dari 6 dan 8 adalah 4",
                    "KPK dari 3 dan 5 adalah 15"
                ],
                correct: [0, 1, 3],
                topic: "Bilangan (L2)",
                explanation: "A: Benar (2 dan 3 prima)<br>B: Benar (4=2¬≤, 9=3¬≤)<br>C: Salah (FPB 6 dan 8 adalah 2)<br>D: Benar (KPK 3 dan 5 adalah 15)"
            },
            {
                question: "Seorang arsitek merancang gedung dengan pola ketinggian lantai mengikuti barisan aritmatika. Lantai 1 setinggi 4m, lantai 2 setinggi 7m (akumulasi 4+3), dan seterusnya dengan beda tinggi antar lantai 3m. Pilihlah pernyataan yang benar!<br><br><em>Jawaban benar lebih dari satu.</em>",
                type: "multiple",
                options: [
                    "Tinggi lantai ke-5 adalah 16m dari dasar",
                    "Tinggi lantai ke-10 adalah 31m dari dasar",
                    "Ketinggian lantai membentuk barisan 4, 7, 10, 13...",
                    "Beda barisan tersebut adalah 4m"
                ],
                correct: [0, 1, 2],
                topic: "Bilangan (L3)",
                explanation: "Un = a + (n‚àí1)b, a=4, b=3<br>A: U‚ÇÖ = 4 + 4(3) = 16 (Benar)<br>B: U‚ÇÅ‚ÇÄ = 4 + 9(3) = 31 (Benar)<br>C: Benar<br>D: Salah (beda 3m)"
            },
            {
                question: "Diketahui himpunan A = {x | 2 < x ‚â§ 8, x ‚àà bilangan genap} dan B = {faktor dari 12}. Manakah pernyataan yang benar?<br><br><em>Jawaban benar lebih dari satu.</em>",
                type: "multiple",
                options: [
                    "Anggota himpunan A adalah {4,6,8}",
                    "Anggota himpunan B adalah {1,2,3,4,6,12}",
                    "A‚à©B = {4,6}",
                    "Banyak anggota himpunan kuasa dari A adalah 6"
                ],
                correct: [0, 1, 2],
                topic: "Aljabar (L2)",
                explanation: "A: {4,6,8} (Benar)<br>B: Faktor 12 = {1,2,3,4,6,12} (Benar)<br>C: Irisan = {4,6} (Benar)<br>D: 2¬≥ = 8, bukan 6 (Salah)"
            },
            {
                question: "Toko 'Segar' menjual paket buah. Paket I (2kg apel, 1kg jeruk) seharga Rp80.000. Paket II (1kg apel, 2kg jeruk) seharga Rp70.000. Manakah kesimpulan yang benar?<br><br><em>Jawaban benar lebih dari satu.</em>",
                type: "multiple",
                options: [
                    "Harga 1kg apel lebih mahal dari 1kg jeruk",
                    "Harga 1kg apel adalah Rp30.000",
                    "Harga 1kg jeruk adalah Rp20.000",
                    "Harga paket 1kg apel dan 1kg jeruk adalah Rp60.000"
                ],
                correct: [0, 1, 2],
                topic: "Aljabar (L3)",
                explanation: "SPLDV: 2a+j=80, a+2j=70<br>Didapat a=30.000, j=20.000<br>A: 30>20 (Benar)<br>B: Benar<br>C: Benar<br>D: 30+20=50 (Salah)"
            },
            {
                question: "Perhatikan sifat-sifat bangun datar berikut. Pilihlah sifat yang dimiliki oleh Belah Ketupat!<br><br><em>Jawaban benar lebih dari satu.</em>",
                type: "multiple",
                options: [
                    "Keempat sisinya sama panjang",
                    "Kedua diagonalnya berpotongan tegak lurus",
                    "Memiliki tepat satu pasang sudut yang sama besar",
                    "Jumlah sudut yang berdekatan adalah 180 derajat"
                ],
                correct: [0, 1, 3],
                topic: "Geometri (L2)",
                explanation: "A: Benar<br>B: Benar<br>C: Salah (Layang-layang punya sifat ini, belah ketupat punya 2 pasang)<br>D: Benar (Sudut sepihak dalam)"
            },
            {
                question: "Titik P(2,‚àí3) dicerminkan terhadap sumbu-x, kemudian ditranslasikan oleh T[‚àí1,5]. Manakah pernyataan yang benar mengenai posisi titik P?<br><br><em>Jawaban benar lebih dari satu.</em>",
                type: "multiple",
                options: [
                    "Bayangan setelah pencerminan adalah P'(2,3)",
                    "Bayangan setelah pencerminan adalah P'(‚àí2,‚àí3)",
                    "Bayangan akhir setelah translasi adalah P''(1,8)",
                    "Titik akhir berada di kuadran I"
                ],
                correct: [0, 2, 3],
                topic: "Geometri (L3)",
                explanation: "Cermin sb-x: (x,‚àíy) ‚Üí (2,3) (Opsi A Benar)<br>Translasi: (2‚àí1, 3+5) ‚Üí (1,8) (Opsi C Benar)<br>Posisi (1,8) di Kuadran I (Opsi D Benar)"
            },
            {
                question: "Sebuah tabung memiliki jari-jari 7 cm dan tinggi 10 cm. Pilihlah pernyataan yang benar! (œÄ=22/7)<br><br><em>Jawaban benar lebih dari satu.</em>",
                type: "multiple",
                options: [
                    "Luas alas tabung adalah 154 cm¬≤",
                    "Luas selimut tabung adalah 440 cm¬≤",
                    "Volume tabung adalah 1.540 cm¬≥",
                    "Panjang selimut tabung jika dibentangkan adalah 22 cm"
                ],
                correct: [0, 1, 2],
                topic: "Geometri (L2)",
                explanation: "A: œÄr¬≤ = 22/7√ó49 = 154 (Benar)<br>B: 2œÄrt = 2√ó22/7√ó7√ó10 = 440 (Benar)<br>C: 154√ó10 = 1540 (Benar)<br>D: 2œÄr = 44 cm (Salah)"
            },
            {
                question: "Data nilai kelas 9A: 6, 6, 7, 7, 7, 8, 8, 9, 10, 10. Manakah interpretasi data yang tepat?<br><br><em>Jawaban benar lebih dari satu.</em>",
                type: "multiple",
                options: [
                    "Modus data adalah 7",
                    "Median data adalah 7,5",
                    "Rata-rata (mean) data lebih kecil dari 7",
                    "Jangkauan (range) data adalah 4"
                ],
                correct: [0, 1, 3],
                topic: "Data (L3)",
                explanation: "A: 7 muncul 3x (Benar)<br>B: Data ke 5 & 6 (7 & 8) ‚Üí 7,5 (Benar)<br>C: Sum=78, Mean=7,8 (7,8 > 7, Salah)<br>D: 10‚àí6=4 (Benar)"
            },
            {
                question: "Dalam sebuah kotak terdapat 5 bola merah, 3 bola kuning, dan 2 bola hijau. Diambil satu bola secara acak. Pilihlah pernyataan peluang yang benar!<br><br><em>Jawaban benar lebih dari satu.</em>",
                type: "multiple",
                options: [
                    "Peluang terambil bola merah adalah 0,5",
                    "Peluang terambil bola hijau adalah 0,2",
                    "Peluang terambil bola bukan kuning adalah 0,7",
                    "Peluang terambil bola merah atau hijau adalah 0,8"
                ],
                correct: [0, 1, 2],
                topic: "Data (L2)",
                explanation: "Total = 10<br>A: 5/10=0,5 (Benar)<br>B: 2/10=0,2 (Benar)<br>C: Bukan Kuning (Merah+Hijau)=7. 7/10=0,7 (Benar)<br>D: 7/10=0,7 (Salah)"
            },

            // BAGIAN III: PGK KATEGORI - BENAR/SALAH (Soal 22-30)
            {
                question: "Diketahui pecahan: A=2/3, B=0,6, C=65%.<br><br><em>Tentukan Benar atau Salah untuk setiap pernyataan berikut!</em>",
                type: "category",
                categories: [
                    { statement: "Nilai A lebih besar dari B", options: ["Benar", "Salah"] },
                    { statement: "Urutan dari terkecil adalah B, C, A", options: ["Benar", "Salah"] },
                    { statement: "Nilai C sama dengan 0,65", options: ["Benar", "Salah"] }
                ],
                correct: [0, 0, 0],
                topic: "Bilangan (L2)",
                explanation: "A=0,66...; B=0,60; C=0,65<br>1. 0,66>0,60 (Benar)<br>2. 0,60<0,65<0,66 (Benar)<br>3. 65/100=0,65 (Benar)"
            },
            {
                question: "Toko A memberikan diskon tunggal 50%. Toko B memberikan diskon ganda 40% + 10% untuk barang yang sama seharga Rp100.000.<br><br><em>Tentukan Benar atau Salah untuk setiap pernyataan berikut!</em>",
                type: "category",
                categories: [
                    { statement: "Harga akhir di Toko A adalah Rp50.000", options: ["Benar", "Salah"] },
                    { statement: "Besar diskon di Toko B totalnya adalah 50%", options: ["Benar", "Salah"] },
                    { statement: "Harga di Toko B lebih murah daripada Toko A", options: ["Benar", "Salah"] }
                ],
                correct: [0, 1, 1],
                topic: "Bilangan (L3)",
                explanation: "1. 100rb√ó50%=50rb (Benar)<br>2. Diskon B: 40%+(10%√ó60%)=46% (Salah)<br>3. Harga B = Rp54.000 > A (Salah)"
            },
            {
                question: "Diketahui persamaan garis g: y=3x‚àí5.<br><br><em>Tentukan Benar atau Salah untuk setiap pernyataan berikut!</em>",
                type: "category",
                categories: [
                    { statement: "Gradien garis g adalah 3", options: ["Benar", "Salah"] },
                    { statement: "Garis g memotong sumbu y di titik (0, 5)", options: ["Benar", "Salah"] },
                    { statement: "Garis g sejajar dengan garis y=3x+2", options: ["Benar", "Salah"] }
                ],
                correct: [0, 1, 0],
                topic: "Aljabar (L2)",
                explanation: "1. y=mx+c, m=3 (Benar)<br>2. c=‚àí5, harusnya (0,‚àí5) (Salah)<br>3. Gradien sama (m=3), maka sejajar (Benar)"
            },
            {
                question: "Sebuah persegi panjang memiliki panjang (x+5) cm dan lebar (x‚àí2) cm. Kelilingnya adalah 30 cm.<br><br><em>Tentukan Benar atau Salah untuk setiap pernyataan berikut!</em>",
                type: "category",
                categories: [
                    { statement: "Model matematika kelilingnya adalah 4x+6=30", options: ["Benar", "Salah"] },
                    { statement: "Nilai x adalah 6", options: ["Benar", "Salah"] },
                    { statement: "Luas persegi panjang tersebut adalah 44 cm¬≤", options: ["Benar", "Salah"] }
                ],
                correct: [0, 0, 0],
                topic: "Aljabar (L3)",
                explanation: "1. 2(x+5+x‚àí2)=30 ‚Üí 2(2x+3)=30 ‚Üí 4x+6=30 (Benar)<br>2. 4x=24 ‚Üí x=6 (Benar)<br>3. p=11, l=4 ‚Üí L=44 (Benar)"
            },
            {
                question: "Diketahui fungsi f(x)=x¬≤‚àí1 dengan daerah asal {‚àí1,0,1}.<br><br><em>Tentukan Benar atau Salah untuk setiap pernyataan berikut!</em>",
                type: "category",
                categories: [
                    { statement: "Range fungsi tersebut adalah {0,‚àí1}", options: ["Benar", "Salah"] },
                    { statement: "Grafik fungsi tersebut berupa garis lurus", options: ["Benar", "Salah"] },
                    { statement: "Nilai fungsi untuk x=2 adalah 3", options: ["Benar", "Salah"] }
                ],
                correct: [0, 1, 0],
                topic: "Aljabar (L2)",
                explanation: "1. f(‚àí1)=0, f(0)=‚àí1, f(1)=0. Range {0,‚àí1} (Benar)<br>2. Kuadratik = Parabola (Salah)<br>3. 2¬≤‚àí1=3 (Benar)"
            },
            {
                question: "Perhatikan hubungan antar sudut.<br><br><em>Tentukan Benar atau Salah untuk setiap pernyataan berikut!</em>",
                type: "category",
                categories: [
                    { statement: "Sudut yang saling berpelurus jumlahnya 180¬∞", options: ["Benar", "Salah"] },
                    { statement: "Sudut yang saling bertolak belakang besarnya sama", options: ["Benar", "Salah"] },
                    { statement: "Sudut penyiku dari 30¬∞ adalah 150¬∞", options: ["Benar", "Salah"] }
                ],
                correct: [0, 0, 1],
                topic: "Geometri (L2)",
                explanation: "1. Definisi pelurus (Benar)<br>2. Definisi bertolak belakang (Benar)<br>3. Penyiku 90‚àí30=60 (Salah)"
            },
            {
                question: "Sebuah foto berukuran 30 cm √ó 40 cm ditempel pada karton sebangun. Sisa karton kiri, kanan, atas foto 3 cm.<br><br><em>Tentukan Benar atau Salah untuk setiap pernyataan berikut!</em>",
                type: "category",
                categories: [
                    { statement: "Lebar karton adalah 36 cm", options: ["Benar", "Salah"] },
                    { statement: "Sisa karton bagian bawah adalah 3 cm", options: ["Benar", "Salah"] },
                    { statement: "Luas karton adalah 1.728 cm¬≤", options: ["Benar", "Salah"] }
                ],
                correct: [0, 1, 0],
                topic: "Geometri (L3)",
                explanation: "1. 30+3+3=36 (Benar)<br>2. Sebangun: 30/36=40/t ‚Üí t=48. Sisa bawah 48‚àí40‚àí3=5 (Salah)<br>3. 36√ó48=1728 (Benar)"
            },
            {
                question: "Diagram lingkaran menunjukkan hobi siswa: Bola (40%), Renang (25%), Basket (X%), Voli (15%). Total siswa 200.<br><br><em>Tentukan Benar atau Salah untuk setiap pernyataan berikut!</em>",
                type: "category",
                categories: [
                    { statement: "Persentase siswa hobi Basket adalah 20%", options: ["Benar", "Salah"] },
                    { statement: "Banyak siswa hobi Renang adalah 50 orang", options: ["Benar", "Salah"] },
                    { statement: "Selisih siswa hobi Bola dan Voli adalah 40 orang", options: ["Benar", "Salah"] }
                ],
                correct: [0, 0, 1],
                topic: "Data (L2)",
                explanation: "1. 100‚àí(40+25+15)=20% (Benar)<br>2. 25%√ó200=50 (Benar)<br>3. (40%‚àí15%)√ó200=50 (Salah, harusnya 50 bukan 40)"
            },
            {
                question: "Rata-rata tinggi 5 orang adalah 160 cm. Orang ke-6 masuk dengan tinggi 170 cm.<br><br><em>Tentukan Benar atau Salah untuk setiap pernyataan berikut!</em>",
                type: "category",
                categories: [
                    { statement: "Rata-rata tinggi badan akan naik", options: ["Benar", "Salah"] },
                    { statement: "Median data pasti berubah", options: ["Benar", "Salah"] },
                    { statement: "Jumlah total tinggi badan menjadi 970 cm", options: ["Benar", "Salah"] }
                ],
                correct: [0, 1, 0],
                topic: "Data (L3)",
                explanation: "1. 170>160, rata-rata naik (Benar)<br>2. Belum tentu, tergantung sebaran data awal (Salah)<br>3. (5√ó160)+170=800+170=970 (Benar)"
            }
        ];

        let currentQuestion = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let answeredCount = 0;
        let studentName = '';

        function showNameInput() {
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('nameScreen').style.display = 'block';
            document.getElementById('studentName').focus();
            
            document.getElementById('studentName').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startTest();
                }
            });
        }

        function backToWelcome() {
            document.getElementById('nameScreen').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'block';
        }

        function startTest() {
            const nameInput = document.getElementById('studentName').value.trim();
            
            if (nameInput === '') {
                alert('Silakan masukkan nama Anda terlebih dahulu!');
                document.getElementById('studentName').focus();
                return;
            }
            
            studentName = nameInput;
            document.getElementById('nameScreen').style.display = 'none';
            document.getElementById('questionSection').style.display = 'block';
            loadQuestion();
        }

        function loadQuestion() {
            const q = questions[currentQuestion];
            const section = document.getElementById('questionSection');
            
            let optionsHTML = '';
            
            if (q.type === 'pg') {
                optionsHTML = q.options.map((opt, idx) => `
                    <div class="option ${userAnswers[currentQuestion] === idx ? 'selected' : ''}" onclick="selectOption(${idx})">
                        <input type="radio" name="q${currentQuestion}" value="${idx}" 
                            ${userAnswers[currentQuestion] === idx ? 'checked' : ''}>
                        <span>${opt}</span>
                    </div>
                `).join('');
            } else if (q.type === 'multiple') {
                optionsHTML = q.options.map((opt, idx) => `
                    <div class="option ${userAnswers[currentQuestion]?.includes(idx) ? 'selected' : ''}" onclick="toggleMultiple(${idx})">
                        <input type="checkbox" id="opt${idx}" value="${idx}"
                            ${userAnswers[currentQuestion]?.includes(idx) ? 'checked' : ''}>
                        <span>${opt}</span>
                    </div>
                `).join('');
            } else if (q.type === 'category') {
                optionsHTML = `
                    <table class="category-table">
                        <thead>
                            <tr>
                                <th style="width: 60%;">Pernyataan</th>
                                ${q.categories[0].options.map(opt => `<th>${opt}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody>
                            ${q.categories.map((cat, idx) => `
                                <tr>
                                    <td>${cat.statement}</td>
                                    ${cat.options.map((opt, optIdx) => `
                                        <td>
                                            <div class="category-option">
                                                <label>
                                                    <input type="radio" name="cat${idx}" value="${optIdx}"
                                                        ${userAnswers[currentQuestion]?.[idx] === optIdx ? 'checked' : ''}
                                                        onchange="selectCategory(${idx}, ${optIdx})">
                                                </label>
                                            </div>
                                        </td>
                                    `).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            }
            
            section.innerHTML = `
                <div class="question-box">
                    <div class="question-header">
                        <span class="question-number">Soal ${currentQuestion + 1} dari 30</span>
                        <span class="topic-badge">${q.topic}</span>
                    </div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">${optionsHTML}</div>
                </div>
                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousQuestion()" 
                        ${currentQuestion === 0 ? 'disabled' : ''}>
                        ‚Üê Sebelumnya
                    </button>
                    <button class="btn" onclick="nextQuestion()">
                        ${currentQuestion === questions.length - 1 ? 'Selesai' : 'Selanjutnya ‚Üí'}
                    </button>
                </div>
            `;

            updateProgress();
        }

        function selectOption(idx) {
            if (userAnswers[currentQuestion] === null) answeredCount++;
            userAnswers[currentQuestion] = idx;
            
            document.querySelectorAll('.option').forEach((opt, i) => {
                opt.classList.toggle('selected', i === idx);
            });
            document.querySelector(`input[value="${idx}"]`).checked = true;
            updateProgress();
        }

        function toggleMultiple(idx) {
            if (userAnswers[currentQuestion] === null) {
                userAnswers[currentQuestion] = [];
                answeredCount++;
            }
            
            const answers = userAnswers[currentQuestion];
            const index = answers.indexOf(idx);
            
            if (index > -1) {
                answers.splice(index, 1);
                if (answers.length === 0) {
                    userAnswers[currentQuestion] = null;
                    answeredCount--;
                }
            } else {
                answers.push(idx);
            }
            
            const checkbox = document.getElementById(`opt${idx}`);
            checkbox.checked = !checkbox.checked;
            checkbox.parentElement.classList.toggle('selected', checkbox.checked);
            updateProgress();
        }

        function selectCategory(catIdx, optIdx) {
            if (userAnswers[currentQuestion] === null) {
                userAnswers[currentQuestion] = new Array(questions[currentQuestion].categories.length).fill(null);
                answeredCount++;
            }
            
            userAnswers[currentQuestion][catIdx] = optIdx;
            
            // Check if all categories are answered
            const allAnswered = userAnswers[currentQuestion].every(ans => ans !== null);
            if (!allAnswered && answeredCount > 0) {
                // Don't count as fully answered yet
            }
            
            updateProgress();
        }

        function updateProgress() {
            const progress = (answeredCount / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('answered').textContent = answeredCount;
            document.getElementById('percentage').textContent = Math.round(progress) + '%';
        }

        function nextQuestion() {
            if (currentQuestion === questions.length - 1) {
                if (answeredCount < questions.length) {
                    alert('Harap jawab semua soal sebelum menyelesaikan tryout!');
                    return;
                }
                showResults();
            } else {
                currentQuestion++;
                loadQuestion();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }

        function showResults() {
            let correct = 0;
            const reviewHTML = [];

            questions.forEach((q, idx) => {
                const userAnswer = userAnswers[idx];
                let isCorrect = false;

                if (q.type === 'pg') {
                    isCorrect = userAnswer === q.correct;
                } else if (q.type === 'multiple') {
                    if (userAnswer && Array.isArray(userAnswer) && Array.isArray(q.correct)) {
                        const sortedUser = [...userAnswer].sort();
                        const sortedCorrect = [...q.correct].sort();
                        isCorrect = JSON.stringify(sortedUser) === JSON.stringify(sortedCorrect);
                    }
                } else if (q.type === 'category') {
                    if (userAnswer && Array.isArray(userAnswer) && Array.isArray(q.correct)) {
                        isCorrect = JSON.stringify(userAnswer) === JSON.stringify(q.correct);
                    }
                }

                if (isCorrect) correct++;

                const statusClass = isCorrect ? 'correct' : 'wrong';
                const statusText = isCorrect ? '‚úì Benar' : '‚úó Salah';

                let answerDisplay = '';
                if (q.type === 'pg') {
                    answerDisplay = `
                        <div class="answer-comparison">
                            ${!isCorrect ? `<div class="answer-line your-answer">‚ùå Jawaban Anda: ${q.options[userAnswer]}</div>` : ''}
                            <div class="answer-line correct-answer">‚úì Jawaban Benar: ${q.options[q.correct]}</div>
                        </div>
                    `;
                } else if (q.type === 'multiple') {
                    const correctOptions = q.correct.map(i => q.options[i]).join(', ');
                    const userOptions = userAnswer ? userAnswer.map(i => q.options[i]).join(', ') : 'Tidak dijawab';
                    answerDisplay = `
                        <div class="answer-comparison">
                            ${!isCorrect ? `<div class="answer-line your-answer">‚ùå Jawaban Anda: ${userOptions}</div>` : ''}
                            <div class="answer-line correct-answer">‚úì Jawaban Benar: ${correctOptions}</div>
                        </div>
                    `;
                } else if (q.type === 'category') {
                    answerDisplay = `
                        <div class="answer-comparison">
                            ${q.categories.map((cat, i) => {
                                const userAns = userAnswer?.[i];
                                const correctAns = q.correct[i];
                                const match = userAns === correctAns;
                                return `
                                    <div style="margin: 8px 0; padding: 8px; background: ${match ? '#d4edda' : '#f8d7da'}; border-radius: 5px;">
                                        <strong>${cat.statement}</strong><br>
                                        ${!match ? `Jawaban Anda: ${cat.options[userAns] || 'Tidak dijawab'}<br>` : ''}
                                        Jawaban Benar: ${cat.options[correctAns]}
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    `;
                }

                reviewHTML.push(`
                    <div class="review-question ${statusClass}">
                        <div class="review-header">
                            <div>
                                <strong>Soal ${idx + 1}</strong>
                                <span class="topic-badge" style="margin-left: 10px;">${q.topic}</span>
                            </div>
                            <span class="review-status ${statusClass}">${statusText}</span>
                        </div>
                        <div class="question-text">${q.question}</div>
                        ${answerDisplay}
                        <div class="explanation">
                            <div class="explanation-title">üí° Pembahasan:</div>
                            <div>${q.explanation}</div>
                        </div>
                    </div>
                `);
            });

            const percentage = Math.round((correct / questions.length) * 100);

            document.getElementById('questionSection').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';
            document.getElementById('studentNameDisplay').textContent = studentName;
            document.getElementById('finalScore').textContent = correct;
            document.getElementById('scorePercentage').textContent = percentage + '%';
            document.getElementById('correctAnswers').textContent = correct;
            document.getElementById('wrongAnswers').textContent = questions.length - correct;
            document.getElementById('reviewSection').innerHTML = reviewHTML.join('');

            window.scrollTo(0, 0);
        }

        function resetTest() {
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            answeredCount = 0;
            studentName = '';
            document.getElementById('studentName').value = '';
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'block';
            updateProgress();
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>
