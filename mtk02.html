<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TKA Matematika SMP - Tryout (Paket B)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .progress-bar {
            background: #f0f0f0;
            height: 8px;
            border-radius: 4px;
            margin: 20px 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            padding: 20px 30px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .content {
            padding: 30px;
        }

        .welcome-screen, .name-screen, .result-screen {
            text-align: center;
            padding: 40px 20px;
        }

        .welcome-screen h2, .name-screen h2 {
            font-size: 28px;
            color: #333;
            margin-bottom: 20px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
            text-align: left;
        }

        .info-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .info-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .info-card p {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
        }

        .name-input-group {
            margin: 30px auto;
            max-width: 400px;
            text-align: left;
        }

        .name-input-group label {
            display: block;
            margin-bottom: 8px;
            color: #666;
            font-weight: 500;
        }

        .name-input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .name-input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        .question-card {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .topic-badge {
            background: #e3e8ff;
            color: #667eea;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .question-text {
            font-size: 18px;
            color: #2d3436;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-item:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }

        .option-item.selected {
            border-color: #667eea;
            background: #e3e8ff;
        }

        .option-marker {
            width: 30px;
            height: 30px;
            background: #e9ecef;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
            color: #666;
            flex-shrink: 0;
        }

        .option-item.selected .option-marker {
            background: #667eea;
            color: white;
        }
        
        /* Styles for PGK-MCMA (Checkbox) */
        .checkbox-item .option-marker {
            border-radius: 6px; /* Square for checkbox */
        }
        
        .hint {
            font-size: 14px;
            color: #666;
            margin-top: 10px;
            font-style: italic;
        }

        /* Styles for PGK-Kategori (Table) */
        .category-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .category-table th {
            text-align: center;
            padding: 12px;
            background: #f8f9fa;
            color: #495057;
            border-bottom: 2px solid #e9ecef;
        }
        
        .category-table th:first-child {
            text-align: left;
        }
        
        .category-table td {
            padding: 12px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .radio-cell {
            text-align: center;
            width: 80px;
        }
        
        .custom-radio {
            width: 24px;
            height: 24px;
            border: 2px solid #cbd5e0;
            border-radius: 50%;
            display: inline-block;
            cursor: pointer;
            position: relative;
        }
        
        .custom-radio.active {
            border-color: #667eea;
            background-color: #667eea;
        }
        
        .custom-radio.active::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .result-header {
            margin-bottom: 40px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            margin: 0 auto 20px;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .score-number {
            font-size: 48px;
            font-weight: bold;
        }

        .score-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .review-section {
            text-align: left;
            margin-top: 40px;
        }

        .review-question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #ddd;
        }

        .review-question.correct {
            border-left-color: #2ecc71;
            background: #e8f8f5;
        }

        .review-question.wrong {
            border-left-color: #e74c3c;
            background: #fdedec;
        }
        
        .review-question.partial {
            border-left-color: #f1c40f;
            background: #fef9e7;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: #666;
        }

        .review-status {
            font-weight: bold;
        }

        .review-status.correct { color: #2ecc71; }
        .review-status.wrong { color: #e74c3c; }
        .review-status.partial { color: #f39c12; }

        .explanation {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(0,0,0,0.1);
            font-size: 14px;
            color: #555;
        }
        
        .answer-comparison {
            margin-top: 10px;
            font-size: 14px;
        }
        
        .answer-line {
            margin: 5px 0;
        }
        
        .answer-line.correct-answer { color: #2ecc71; font-weight: 500; }
        .answer-line.your-answer { color: #e74c3c; }

        .student-name-display {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        @media (max-width: 600px) {
            .header { padding: 20px; }
            .content { padding: 20px; }
            .stats { padding: 15px; }
            .stat-value { font-size: 18px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî¢ TKA Matematika SMP</h1>
            <p>Tes Kemampuan Akademik - Paket A</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressBar"></div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">Soal Dijawab</div>
                <div class="stat-value" id="answered">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Total Soal</div>
                <div class="stat-value">30</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Progress</div>
                <div class="stat-value" id="percentage">0%</div>
            </div>
        </div>

        <div class="content">
            <div class="welcome-screen" id="welcomeScreen">
                <h2>Selamat Datang di Tryout Matematika! üìê</h2>
                <p>Ujilah kemampuan matematika Anda dengan 30 soal Paket A.</p>
                
                <div class="info-grid">
                    <div class="info-card">
                        <h3>üìä Format Soal</h3>
                        <p>1-12: Pilihan Ganda (PG)<br>13-21: Pilihan Ganda Kompleks (MCMA)<br>22-30: Benar/Salah (Kategori)</p>
                    </div>
                    <div class="info-card">
                        <h3>‚ö° Materi</h3>
                        <p>Bilangan, Aljabar, Geometri, Data & Peluang</p>
                    </div>
                    <div class="info-card">
                        <h3>‚úÖ Petunjuk</h3>
                        <p>PGK-MCMA: Jawaban lebih dari satu.<br>Kategori: Tentukan Benar/Salah setiap pernyataan.</p>
                    </div>
                    <div class="info-card">
                        <h3>üìù Evaluasi</h3>
                        <p>Pembahasan lengkap ditampilkan di akhir sesi.</p>
                    </div>
                </div>

                <button class="btn" onclick="showNameInput()">Mulai Tryout</button>
            </div>

            <div class="name-screen" id="nameScreen" style="display: none;">
                <h2>‚úèÔ∏è Identitas Peserta</h2>
                <p>Silakan masukkan nama Anda sebelum memulai tryout</p>
                <div class="name-input-group">
                    <label for="studentName">Nama Lengkap:</label>
                    <input type="text" id="studentName" placeholder="Masukkan nama Anda..." autofocus>
                </div>
                <button class="btn" onclick="startTest()">Mulai Mengerjakan</button>
                <button class="btn btn-secondary" onclick="backToWelcome()">Kembali</button>
            </div>

            <div class="question-section" id="questionSection" style="display: none;">
                </div>

            <div class="result-screen" id="resultScreen" style="display: none;">
                <div class="result-header">
                    <div class="student-name-display" id="studentNameDisplay"></div>
                    <p>Hasil Tryout TKA Matematika</p>
                </div>
                
                <div class="score-circle">
                    <div class="score-number" id="finalScore">0</div>
                    <div class="score-label">Skor Akhir</div>
                </div>

                <div class="stats" style="border: none; background: transparent;">
                    <div class="stat-item">
                        <div class="stat-label">Benar</div>
                        <div class="stat-value" id="correctAnswers" style="color: #2ecc71;">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Salah</div>
                        <div class="stat-value" id="wrongAnswers" style="color: #e74c3c;">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Akurasi</div>
                        <div class="stat-value" id="scorePercentage">0%</div>
                    </div>
                </div>

                <div class="review-section" id="reviewSection">
                    </div>

                <button class="btn" onclick="resetTest()">Coba Lagi</button>
            </div>
        </div>
    </div>

    <script>
        const questions = [
    {
        "id": 1,
        "question": "Dalam sebuah kompetisi matematika, setiap jawaban benar diberi skor 4, salah -2, dan tidak dijawab -1. Dari 40 soal, Budi menjawab benar 28 soal dan salah 5 soal. Skor total yang diperoleh Budi adalah ....",
        "topic": "Bilangan (L2)",
        "explanation": "Benar: 28\u00d74=112Salah: 5\u00d7(\u22122)=\u221210Tidak dijawab: (40\u221228\u22125)=7\u00d7(\u22121)=\u22127Total: 112\u221210\u22127=95.",
        "type": "PG",
        "options": [
            "102",
            "96",
            "95",
            "88"
        ],
        "correct": 2
    },
    {
        "id": 2,
        "question": "Bentuk sederhana dari 248\u200b+75\u200b\u2212312\u200b adalah ....",
        "topic": "Bilangan (L2)",
        "explanation": "216\u00d73\u200b+25\u00d73\u200b\u221234\u00d73\u200b=2(4)3\u200b+53\u200b\u22123(2)3\u200b=83\u200b+53\u200b\u221263\u200b=73\u200b.",
        "type": "PG",
        "options": [
            "53\u200b",
            "63\u200b",
            "73\u200b",
            "93\u200b"
        ],
        "correct": 2
    },
    {
        "id": 3,
        "question": "Amuba membelah diri menjadi dua setiap 15 menit. Jika mula-mula ada 20 amuba, banyak amuba setelah 1,5 jam adalah ....",
        "topic": "Bilangan (L3)",
        "explanation": "Durasi: 1,5 jam = 90 menit.Banyak pembelahan (n): 90/15=6 kali.Rumus: Un=a\u00d7rn\u219220\u00d726=20\u00d764=1.280.",
        "type": "PG",
        "options": [
            "320",
            "640",
            "1.280",
            "2.560"
        ],
        "correct": 2
    },
    {
        "id": 4,
        "question": "Himpunan penyelesaian dari pertidaksamaan 3(x\u22122)\u2264x+8 untuk x bilangan bulat adalah ....",
        "topic": "Aljabar (L2)",
        "explanation": "3x\u22126\u2264x+83x\u2212x\u22648+62x\u226414\u2192x\u22647.Himpunan bilangan bulat \u22647 adalah {...,5,6,7}.",
        "type": "PG",
        "options": [
            "{...,4,5,6}",
            "{...,5,6,7}",
            "{7,8,9,...}",
            "{...,6,7,8}"
        ],
        "correct": 1
    },
    {
        "id": 5,
        "question": "Harga 2 baju dan 1 celana adalah Rp140.000,00. Harga 3 baju dan 2 celana adalah Rp235.000,00. Harga 1 baju dan 1 celana adalah ....",
        "topic": "Aljabar (L2)",
        "explanation": "Misal Baju=x, Celana=y.1) 2x+y=140.0002) 3x+2y=235.000Dari (1) y=140.000\u22122x, subst ke (2).Didapat x=45.000,y=50.000.x+y=95.000.",
        "type": "PG",
        "options": [
            "Rp85.000,00",
            "Rp90.000,00",
            "Rp95.000,00",
            "Rp105.000,00"
        ],
        "correct": 2
    },
    {
        "id": 6,
        "question": "Diketahui fungsi f(x)=ax+b. Jika f(2)=5 dan f(\u22121)=\u22124, nilai dari f(3) adalah ....",
        "topic": "Aljabar (L1)",
        "explanation": "2a+b=5\u2212a+b=\u22124 (kurangkan)3a=9\u2192a=3.3(2)+b=5\u2192b=\u22121.f(3)=3(3)\u22121=8.",
        "type": "PG",
        "options": [
            "8",
            "9",
            "10",
            "11"
        ],
        "correct": 0
    },
    {
        "id": 7,
        "question": "Sebuah tangga sepanjang 10 meter disandarkan pada tembok. Jika jarak kaki tangga ke tembok adalah 6 meter, tinggi tembok yang dicapai tangga adalah ....",
        "topic": "Geometri (L2)",
        "explanation": "Menggunakan Pythagoras: t=102\u221262\u200b=100\u221236\u200b=64\u200b=8.",
        "type": "PG",
        "options": [
            "6 m",
            "7 m",
            "8 m",
            "9 m"
        ],
        "correct": 2
    },
    {
        "id": 8,
        "question": "Luas permukaan kubus yang memiliki panjang rusuk 9 cm adalah ....",
        "topic": "Geometri (L2)",
        "explanation": "Rumus LP Kubus: 6\u00d7s2=6\u00d792=6\u00d781=486.",
        "type": "PG",
        "options": [
            "243\u00a0cm2",
            "486\u00a0cm2",
            "729\u00a0cm2",
            "864\u00a0cm2"
        ],
        "correct": 1
    },
    {
        "id": 9,
        "question": "Sebuah taman berbentuk lingkaran dengan diameter 28 m. Di tengah taman akan dibuat kolam air mancur berbentuk lingkaran berdiameter 14 m. Sisa lahan akan ditanami rumput. Luas lahan yang ditanami rumput adalah ....",
        "topic": "Geometri (L3)",
        "explanation": "Lbesar\u200b=\u03c0\u00d714\u00d714=616.Lkecil\u200b=\u03c0\u00d77\u00d77=154.Sisa = 616\u2212154=462.",
        "type": "PG",
        "options": [
            "154\u00a0m2",
            "308\u00a0m2",
            "462\u00a0m2",
            "616\u00a0m2"
        ],
        "correct": 2
    },
    {
        "id": 10,
        "question": "Rata-rata nilai ulangan matematika dari 10 siswa adalah 75. Jika nilai Andi dimasukkan, rata-ratanya menjadi 76. Nilai Andi adalah ....",
        "topic": "Data (L2)",
        "explanation": "Total awal = 10\u00d775=750.Total baru = 11\u00d776=836.Nilai Andi = 836\u2212750=86.",
        "type": "PG",
        "options": [
            "76",
            "80",
            "85",
            "86"
        ],
        "correct": 3
    },
    {
        "id": 11,
        "question": "Median dari data: 7, 6, 8, 9, 6, 7, 5, 8, 8, 7 adalah ....",
        "topic": "Data (L1)",
        "explanation": "Urutkan: 5, 6, 6, 7, 7, 7, 8, 8, 8, 9.Data ke-10 (genap). Median = data ke-5 & 6 dibagi 2.(7+7)/2=7.",
        "type": "PG",
        "options": [
            "6",
            "6,5",
            "7",
            "7,5"
        ],
        "correct": 2
    },
    {
        "id": 12,
        "question": "Dua buah dadu dilambungkan bersamaan. Peluang muncul mata dadu berjumlah 9 adalah ....",
        "topic": "Data (L2)",
        "explanation": "Kejadian jumlah 9: (3,6), (4,5), (5,4), (6,3) \u2192 ada 4.Ruang sampel: 36.Peluang: 4/36=1/9.",
        "type": "PG",
        "options": [
            "1/9",
            "1/6",
            "4/36",
            "5/36"
        ],
        "correct": 0
    },
    {
        "id": 13,
        "question": "Diketahui himpunan S={1,2,3,...,10}. Dari himpunan tersebut dipilih dua bilangan secara acak. Manakah pernyataan yang benar mengenai sifat bilangan yang mungkin terpilih?",
        "topic": "Bilangan (L2)",
        "explanation": "A: Benar (2 dan 3 prima).B: Benar (4=22, 9=32).C: Salah (FPB 6 dan 8 adalah 2).D: Benar.",
        "type": "PGK-MCMA",
        "options": [
            "Pasangan (2, 3) adalah pasangan bilangan prima.",
            "Pasangan (4, 9) adalah pasangan bilangan kuadrat.",
            "FPB dari 6 dan 8 adalah 4.",
            "KPK dari 3 dan 5 adalah 15."
        ],
        "correct": [
            0,
            1,
            3
        ]
    },
    {
        "id": 14,
        "question": "Seorang arsitek merancang gedung dengan pola ketinggian lantai mengikuti barisan aritmatika. Lantai 1 setinggi 4m, lantai 2 setinggi 7m (akumulasi 4+3), dan seterusnya dengan beda tinggi antar lantai 3m. Pilihlah pernyataan yang benar!",
        "topic": "Bilangan (L3)",
        "explanation": "Un\u200b=a+(n\u22121)b. a=4,b=3.A: U5\u200b=4+4(3)=16 (Benar).B: U10\u200b=4+9(3)=31 (Benar).C: Benar.D: Salah (beda 3m).",
        "type": "PGK-MCMA",
        "options": [
            "Tinggi lantai ke-5 adalah 16m dari dasar.",
            "Tinggi lantai ke-10 adalah 31m dari dasar.",
            "Ketinggian lantai membentuk barisan 4, 7, 10, 13...",
            "Beda barisan tersebut adalah 4m."
        ],
        "correct": [
            0,
            1,
            2
        ]
    },
    {
        "id": 15,
        "question": "Diketahui himpunan $A = {x | 2 < x \\le 8, x \\in \\text{bilangan genap}}$ dan B={faktordari12}. Manakah pernyataan yang benar?",
        "topic": "Aljabar (L2)",
        "explanation": "A: {4,6,8} (Benar).B: Benar.C: Irisan {4,6} (Benar).D: Salah (23=8).",
        "type": "PGK-MCMA",
        "options": [
            "Anggota himpunan A adalah {4,6,8}.",
            "Anggota himpunan B adalah {1,2,3,4,6,12}.",
            "A\u2229B={4,6}.",
            "Banyak anggota himpunan kuasa dari A adalah 6."
        ],
        "correct": [
            0,
            1,
            2
        ]
    },
    {
        "id": 16,
        "question": "Toko \"Segar\" menjual paket buah. Paket I (2kg apel, 1kg jeruk) seharga Rp80.000. Paket II (1kg apel, 2kg jeruk) seharga Rp70.000. Manakah kesimpulan yang benar?",
        "topic": "Aljabar (L3)",
        "explanation": "SPLDV: 2a+j=80, a+2j=70.Didapat a=30.000,j=20.000.A: 30>20 (Benar).B: Benar.C: Benar.D: 30+20=50 (Salah).",
        "type": "PGK-MCMA",
        "options": [
            "Harga 1kg apel lebih mahal dari 1kg jeruk.",
            "Harga 1kg apel adalah Rp30.000.",
            "Harga 1kg jeruk adalah Rp20.000.",
            "Harga paket 1kg apel dan 1kg jeruk adalah Rp60.000."
        ],
        "correct": [
            0,
            1,
            2
        ]
    },
    {
        "id": 17,
        "question": "Perhatikan sifat-sifat bangun datar berikut. Pilihlah sifat yang dimiliki oleh Belah Ketupat!",
        "topic": "Geometri (L2)",
        "explanation": "A: Benar.B: Benar.C: Salah (Layang-layang punya sifat ini, belah ketupat punya 2 pasang).D: Benar (Sudut sepihak dalam).",
        "type": "PGK-MCMA",
        "options": [
            "Keempat sisinya sama panjang.",
            "Kedua diagonalnya berpotongan tegak lurus.",
            "Memiliki tepat satu pasang sudut yang sama besar.",
            "Jumlah sudut yang berdekatan adalah 180 derajat."
        ],
        "correct": [
            0,
            1,
            3
        ]
    },
    {
        "id": 18,
        "question": "Titik P(2,\u22123) dicerminkan terhadap sumbu-x, kemudian ditranslasikan oleh T[\u22121,5]. Manakah pernyataan yang benar mengenai posisi titik P?",
        "topic": "Geometri (L3)",
        "explanation": "Cermin sb-x: (x,\u2212y)\u2192(2,3) (Opsi A Benar).Translasi: (2\u22121,3+5)\u2192(1,8) (Opsi C Benar).Posisi (1,8) di Kuadran I (Opsi D Benar).",
        "type": "PGK-MCMA",
        "options": [
            "Bayangan setelah pencerminan adalah P\u2032(2,3).",
            "Bayangan setelah pencerminan adalah P\u2032(\u22122,\u22123).",
            "Bayangan akhir setelah translasi adalah P\u2032\u2032(1,8).",
            "Titik akhir berada di kuadran I."
        ],
        "correct": [
            0,
            2,
            3
        ]
    },
    {
        "id": 19,
        "question": "Sebuah tabung memiliki jari-jari 7 cm dan tinggi 10 cm. Pilihlah pernyataan yang benar! (\u03c0=22/7)",
        "topic": "Geometri (L2)",
        "explanation": "A: \u03c0r2=22/7\u00d749=154 (Benar).B: 2\u03c0rt=2\u00d722/7\u00d77\u00d710=440 (Benar).C: 154\u00d710=1540 (Benar).D: 2\u03c0r=44 cm (Salah).",
        "type": "PGK-MCMA",
        "options": [
            "Luas alas tabung adalah 154\u00a0cm2.",
            "Luas selimut tabung adalah 440\u00a0cm2.",
            "Volume tabung adalah 1.540\u00a0cm3.",
            "Panjang selimut tabung jika dibentangkan adalah 22 cm."
        ],
        "correct": [
            0,
            1,
            2
        ]
    },
    {
        "id": 20,
        "question": "Data nilai kelas 9A: 6, 6, 7, 7, 7, 8, 8, 9, 10, 10. Manakah interpretasi data yang tepat?",
        "topic": "Data (L3)",
        "explanation": "A: 7 muncul 3x (Benar).B: Data ke 5 & 6 (7 & 8) \u21927,5 (Benar).C: Sum=78, Mean=7,8. (7,8 > 7, Salah).D: 10\u22126=4 (Benar).",
        "type": "PGK-MCMA",
        "options": [
            "Modus data adalah 7.",
            "Median data adalah 7,5.",
            "Rata-rata (mean) data lebih kecil dari 7.",
            "Jangkauan (range) data adalah 4."
        ],
        "correct": [
            0,
            1,
            3
        ]
    },
    {
        "id": 21,
        "question": "Dalam sebuah kotak terdapat 5 bola merah, 3 bola kuning, dan 2 bola hijau. Diambil satu bola secara acak. Pilihlah pernyataan peluang yang benar!",
        "topic": "Data (L2)",
        "explanation": "Total = 10.A: 5/10=0,5 (Benar).B: 2/10=0,2 (Benar).C: Bukan Kuning (Merah+Hijau)=7. 7/10=0,7 (Benar).D: 7/10=0,7 (Salah).",
        "type": "PGK-MCMA",
        "options": [
            "Peluang terambil bola merah adalah 0,5.",
            "Peluang terambil bola hijau adalah 0,2.",
            "Peluang terambil bola bukan kuning adalah 0,7.",
            "Peluang terambil bola merah atau hijau adalah 0,8."
        ],
        "correct": [
            0,
            1,
            2
        ]
    },
    {
        "id": 22,
        "question": "Diketahui pecahan: A=2/3, B=0,6, C=65%.",
        "topic": "Bilangan (L2)",
        "explanation": "A=0,66...; B=0,60; C=0,65.1. 0,66>0,60 (B).2. 0,60<0,65<0,66 (B).3. 65/100=0,65 (B).",
        "type": "PGK-Kategori",
        "options": [
            "Nilai A lebih besar dari B.",
            "Urutan dari terkecil adalah B, C, A.",
            "Nilai C sama dengan 0,65."
        ],
        "correct": [
            true,
            true,
            true
        ]
    },
    {
        "id": 23,
        "question": "Toko A memberikan diskon tunggal 50%. Toko B memberikan diskon ganda 40% + 10% untuk barang yang sama seharga Rp100.000.",
        "topic": "Bilangan (L3)",
        "explanation": "1. 100rb\u00d750%=50rb (B).2. Diskon B: 40%+(10%\u00d760%)=46% (S).3. Harga B = Rp54.000 > A (S).",
        "type": "PGK-Kategori",
        "options": [
            "Harga akhir di Toko A adalah Rp50.000.",
            "Besar diskon di Toko B totalnya adalah 50%.",
            "Harga di Toko B lebih murah daripada Toko A."
        ],
        "correct": [
            true,
            false,
            false
        ]
    },
    {
        "id": 24,
        "question": "Diketahui persamaan garis g:y=3x\u22125.",
        "topic": "Aljabar (L2)",
        "explanation": "1. y=mx+c, m=3 (B).2. c=\u22125, harusnya (0,\u22125) (S).3. Gradien sama (m=3), maka sejajar (B).",
        "type": "PGK-Kategori",
        "options": [
            "Gradien garis g adalah 3.",
            "Garis g memotong sumbu y di titik (0, 5).",
            "Garis g sejajar dengan garis y=3x+2."
        ],
        "correct": [
            true,
            false,
            true
        ]
    },
    {
        "id": 25,
        "question": "Sebuah persegi panjang memiliki panjang (x+5) cm dan lebar (x\u22122) cm. Kelilingnya adalah 30 cm.",
        "topic": "Aljabar (L3)",
        "explanation": "1. 2(x+5+x\u22122)=30\u21922(2x+3)=30\u21924x+6=30 (B).2. 4x=24\u2192x=6 (B).3. p=11,l=4\u2192L=44 (B).",
        "type": "PGK-Kategori",
        "options": [
            "Model matematika kelilingnya adalah 4x+6=30.",
            "Nilai x adalah 6.",
            "Luas persegi panjang tersebut adalah 44\u00a0cm2."
        ],
        "correct": [
            true,
            true,
            true
        ]
    },
    {
        "id": 26,
        "question": "Diketahui fungsi f(x)=x2\u22121 dengan daerah asal {\u22121,0,1}.",
        "topic": "Aljabar (L2)",
        "explanation": "1. f(\u22121)=0,f(0)=\u22121,f(1)=0. Range {0,\u22121} (B).2. Kuadratik = Parabola (S).3. 22\u22121=3 (B).",
        "type": "PGK-Kategori",
        "options": [
            "Range fungsi tersebut adalah {0,\u22121}.",
            "Grafik fungsi tersebut berupa garis lurus.",
            "Nilai fungsi untuk x=2 adalah 3."
        ],
        "correct": [
            true,
            false,
            true
        ]
    },
    {
        "id": 27,
        "question": "Perhatikan hubungan antar sudut.",
        "topic": "Geometri (L2)",
        "explanation": "1. Definisi pelurus (B).2. Definisi bertolak belakang (B).3. Penyiku 90\u221230=60 (S).",
        "type": "PGK-Kategori",
        "options": [
            "Sudut yang saling berpelurus jumlahnya 180\u2218.",
            "Sudut yang saling bertolak belakang besarnya sama.",
            "Sudut penyiku dari 30\u2218 adalah 150\u2218."
        ],
        "correct": [
            true,
            true,
            false
        ]
    },
    {
        "id": 28,
        "question": "Sebuah foto berukuran 30\u00a0cm\u00d740\u00a0cm ditempel pada karton sebangun. Sisa karton kiri, kanan, atas foto 3 cm.",
        "topic": "Geometri (L3)",
        "explanation": "1. 30+3+3=36 (B).2. Sebangun: 30/36=40/tkarton\u200b\u2192t=48. Sisa bawah 48\u221240\u22123=5 (S).3. 36\u00d748=1728 (B).",
        "type": "PGK-Kategori",
        "options": [
            "Lebar karton adalah 36 cm.",
            "Sisa karton bagian bawah adalah 3 cm.",
            "Luas karton adalah 1.728\u00a0cm2."
        ],
        "correct": [
            true,
            false,
            true
        ]
    },
    {
        "id": 29,
        "question": "Diagram lingkaran menunjukkan hobi siswa: Bola (40%), Renang (25%), Basket (X%), Voli (15%). Total siswa 200.",
        "topic": "Data (L2)",
        "explanation": "1. 100\u2212(40+25+15)=20% (B).2. 25%\u00d7200=50 (B).3. (40%\u221215%)\u00d7200=25%\u00d7200=50 (S).",
        "type": "PGK-Kategori",
        "options": [
            "Persentase siswa hobi Basket adalah 20%.",
            "Banyak siswa hobi Renang adalah 50 orang.",
            "Selisih siswa hobi Bola dan Voli adalah 40 orang."
        ],
        "correct": [
            true,
            true,
            false
        ]
    },
    {
        "id": 30,
        "question": "Rata-rata tinggi 5 orang adalah 160 cm. Orang ke-6 masuk dengan tinggi 170 cm.",
        "topic": "Data (L3)",
        "explanation": "1. 170>160, rata-rata naik (B).2. Belum tentu, tergantung sebaran data awal (S).3. (5\u00d7160)+170=800+170=970 (B).",
        "type": "PGK-Kategori",
        "options": [
            "Rata-rata tinggi badan akan naik.",
            "Median data pasti berubah.",
            "Jumlah total tinggi badan menjadi 970 cm."
        ],
        "correct": [
            true,
            false,
            true
        ]
    }
];

        let currentQuestion = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let answeredCount = 0;
        let studentName = '';

        function showNameInput() {
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('nameScreen').style.display = 'block';
        }

        function backToWelcome() {
            document.getElementById('nameScreen').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'block';
        }

        function startTest() {
            const name = document.getElementById('studentName').value.trim();
            if (!name) {
                alert('Silakan isi nama Anda terlebih dahulu!');
                return;
            }
            studentName = name;
            document.getElementById('nameScreen').style.display = 'none';
            document.getElementById('questionSection').style.display = 'block';
            loadQuestion();
            updateProgress();
        }

        function loadQuestion() {
            const q = questions[currentQuestion];
            const section = document.getElementById('questionSection');
            
            let typeBadge = 'Pilihan Ganda';
            if(q.type === 'PGK-MCMA') typeBadge = 'PG Kompleks (Pilih Banyak)';
            if(q.type === 'PGK-Kategori') typeBadge = 'Benar / Salah';

            let html = `
                <div class="question-card" style="display: block;">
                    <div class="question-header">
                        <span class="topic-badge">Soal ${q.id}</span>
                        <span class="topic-badge" style="background:#e8f8f5; color:#2ecc71;">${typeBadge}</span>
                        <span class="topic-badge">${q.topic}</span>
                    </div>
                    <div class="question-text">${q.question}</div>
            `;

            if (q.type === 'PG') {
                html += '<div class="options">';
                q.options.forEach((opt, idx) => {
                    const selected = userAnswers[currentQuestion] === idx ? 'selected' : '';
                    html += `
                        <div class="option-item ${selected}" onclick="selectAnswerPG(${idx})">
                            <div class="option-marker">${String.fromCharCode(65 + idx)}</div>
                            <div class="option-content">${opt}</div>
                        </div>`;
                });
                html += '</div>';
            } else if (q.type === 'PGK-MCMA') {
                html += '<div class="options">';
                q.options.forEach((opt, idx) => {
                    const currentAns = userAnswers[currentQuestion] || [];
                    const selected = currentAns.includes(idx) ? 'selected' : '';
                    html += `
                        <div class="option-item checkbox-item ${selected}" onclick="toggleMCMA(${idx})">
                            <div class="option-marker checkbox-marker" style="border-radius:4px;">${selected ? '‚úî' : ''}</div>
                            <div class="option-content">${String.fromCharCode(65 + idx)}. ${opt}</div>
                        </div>`;
                });
                html += '</div><p class="hint">Pilih lebih dari satu jawaban yang benar.</p>';
            } else if (q.type === 'PGK-Kategori') {
                html += '<div class="category-container"><table class="category-table">';
                html += '<tr><th>Pernyataan</th><th>Benar</th><th>Salah</th></tr>';
                q.options.forEach((opt, idx) => {
                    const currentAns = userAnswers[currentQuestion] || {};
                    const isTrue = currentAns[idx] === true;
                    const isFalse = currentAns[idx] === false;
                    html += `
                        <tr>
                            <td>${opt}</td>
                            <td class="radio-cell">
                                <div class="custom-radio ${isTrue ? 'active' : ''}" onclick="selectCategory(${idx}, true)"></div>
                            </td>
                            <td class="radio-cell">
                                <div class="custom-radio ${isFalse ? 'active' : ''}" onclick="selectCategory(${idx}, false)"></div>
                            </td>
                        </tr>`;
                });
                html += '</table></div><p class="hint">Tentukan Benar atau Salah untuk setiap pernyataan.</p>';
            }

            html += `
                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousQuestion()" ${currentQuestion === 0 ? 'disabled' : ''}>Sebelumnya</button>
                    <button class="btn" onclick="nextQuestion()">${currentQuestion === questions.length - 1 ? 'Selesai' : 'Selanjutnya'}</button>
                </div>
            </div>`;

            section.innerHTML = html;
        }

        function selectAnswerPG(idx) {
            userAnswers[currentQuestion] = idx;
            checkAnswered();
            loadQuestion();
        }

        function toggleMCMA(idx) {
            let ans = userAnswers[currentQuestion] || [];
            if (ans.includes(idx)) {
                ans = ans.filter(i => i !== idx);
            } else {
                ans.push(idx);
                ans.sort();
            }
            // If empty, set to null so it doesn't count as answered
            userAnswers[currentQuestion] = ans.length > 0 ? ans : null;
            checkAnswered();
            loadQuestion();
        }

        function selectCategory(rowIdx, value) {
            let ans = userAnswers[currentQuestion] || {};
            ans[rowIdx] = value;
            // Check if all rows answered
            const optLength = questions[currentQuestion].options.length;
            if (Object.keys(ans).length === optLength) {
                userAnswers[currentQuestion] = ans;
            } else {
                 // Store partial answer but might not count as full 'answered' yet depending on strictness
                 // simpler to just update state
                 userAnswers[currentQuestion] = ans;
            }
            checkAnswered();
            loadQuestion();
        }

        function checkAnswered() {
            // Count non-null answers
            let count = 0;
            userAnswers.forEach((ans, idx) => {
                const q = questions[idx];
                if (ans !== null && ans !== undefined) {
                    if (q.type === 'PGK-Kategori') {
                        // Only count if all rows are answered
                        if (Object.keys(ans).length === q.options.length) count++;
                    } else {
                        count++;
                    }
                }
            });
            answeredCount = count;
            updateProgress();
        }

        function updateProgress() {
            const progress = (answeredCount / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('answered').textContent = answeredCount;
            document.getElementById('percentage').textContent = Math.round(progress) + '%';
        }

        function nextQuestion() {
            if (currentQuestion === questions.length - 1) {
                if (answeredCount < questions.length) {
                    if(!confirm('Anda belum menjawab semua soal. Yakin ingin menyelesaikan?')) return;
                }
                showResults();
            } else {
                currentQuestion++;
                loadQuestion();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }

        function isCorrectAnswer(q, ans) {
            if (!ans && ans !== 0) return false;
            
            if (q.type === 'PG') {
                return ans === q.correct;
            } 
            else if (q.type === 'PGK-MCMA') {
                if (!Array.isArray(ans)) return false;
                // Arrays are already sorted in toggle
                return JSON.stringify(ans) === JSON.stringify(q.correct);
            }
            else if (q.type === 'PGK-Kategori') {
                if (!ans) return false;
                if (Object.keys(ans).length < q.correct.length) return false;
                for (let i = 0; i < q.correct.length; i++) {
                    if (ans[i] !== q.correct[i]) return false;
                }
                return true;
            }
            return false;
        }

        function formatUserAnswer(q, ans) {
            if (ans === null || ans === undefined) return '<span style="color:#e74c3c">Tidak dijawab</span>';
            
            if (q.type === 'PG') {
                return q.options[ans];
            }
            else if (q.type === 'PGK-MCMA') {
                return ans.map(i => String.fromCharCode(65+i)).join(', ');
            }
            else if (q.type === 'PGK-Kategori') {
                return "Lihat tabel di atas"; // Simplified for review summary
            }
        }

        function formatCorrectAnswer(q) {
            if (q.type === 'PG') {
                return q.options[q.correct];
            }
            else if (q.type === 'PGK-MCMA') {
                return q.correct.map(i => String.fromCharCode(65+i)).join(', ');
            }
            else if (q.type === 'PGK-Kategori') {
                return q.correct.map((v, i) => `${i+1}.${v?'Benar':'Salah'}`).join(', ');
            }
        }

        function showResults() {
            let correct = 0;
            const reviewHTML = [];

            questions.forEach((q, idx) => {
                const userAnswer = userAnswers[idx];
                const isCorrect = isCorrectAnswer(q, userAnswer);
                
                if (isCorrect) correct++;

                const statusClass = isCorrect ? 'correct' : 'wrong';
                const statusText = isCorrect ? '‚úì Benar' : '‚úó Salah';

                let answerDisplay = '';
                
                // Custom display for category review to show detailed table
                if (q.type === 'PGK-Kategori') {
                    answerDisplay = '<div style="margin:10px 0; font-size:13px;"><strong>Detail Jawaban:</strong><table class="category-table" style="font-size:12px">';
                    answerDisplay += '<tr><th>Pernyataan</th><th>Jawaban Anda</th><th>Kunci</th></tr>';
                    q.options.forEach((opt, i) => {
                        const uVal = userAnswer ? userAnswer[i] : null;
                        const cVal = q.correct[i];
                        const rowClass = uVal === cVal ? 'background:#e8f8f5' : 'background:#fdedec';
                        answerDisplay += `<tr style="${rowClass}">
                            <td>${opt}</td>
                            <td>${uVal === true ? 'Benar' : (uVal === false ? 'Salah' : '-')}</td>
                            <td>${cVal ? 'Benar' : 'Salah'}</td>
                        </tr>`;
                    });
                    answerDisplay += '</table></div>';
                } else {
                    answerDisplay = `
                        <div class="answer-comparison">
                            ${!isCorrect ? `<div class="answer-line your-answer">‚ùå Jawaban Anda: ${formatUserAnswer(q, userAnswer)}</div>` : ''}
                            <div class="answer-line correct-answer">‚úì Jawaban Benar: ${formatCorrectAnswer(q)}</div>
                        </div>
                    `;
                }

                reviewHTML.push(`
                    <div class="review-question ${statusClass}">
                        <div class="review-header">
                            <div>
                                <strong>Soal ${q.id}</strong>
                                <span class="topic-badge" style="margin-left: 10px;">${q.topic}</span>
                            </div>
                            <span class="review-status ${statusClass}">${statusText}</span>
                        </div>
                        <div class="question-text">${q.question}</div>
                        ${answerDisplay}
                        <div class="explanation">
                            <div class="explanation-title">üí° Pembahasan:</div>
                            <div>${q.explanation}</div>
                        </div>
                    </div>
                `);
            });

            const percentage = Math.round((correct / questions.length) * 100);

            document.getElementById('questionSection').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';
            document.getElementById('studentNameDisplay').textContent = studentName;
            document.getElementById('finalScore').textContent = correct;
            document.getElementById('scorePercentage').textContent = percentage + '%';
            document.getElementById('correctAnswers').textContent = correct;
            document.getElementById('wrongAnswers').textContent = questions.length - correct;
            document.getElementById('reviewSection').innerHTML = reviewHTML.join('');

            window.scrollTo(0, 0);
        }

        function resetTest() {
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            answeredCount = 0;
            studentName = '';
            document.getElementById('studentName').value = '';
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('welcomeScreen').style.display = 'block';
            updateProgress();
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>
